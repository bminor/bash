#   This program is free software: you can redistribute it and/or modify
#   it under the terms of the GNU General Public License as published by
#   the Free Software Foundation, either version 3 of the License, or
#   (at your option) any later version.
#
#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU General Public License for more details.
#
#   You should have received a copy of the GNU General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
. ./test-aux-functions
#
# getopts tests
# this should fail
getopts
echo $?
getopts opts
echo $?

# maybe someday we will have a ksh93-like -a argument to set the name
# used in error messages, but not yet
getopts -a opts name

test_runsub ./getopts1.sub -a -b bval one two three
# make sure getopts works when there are more than 9 positional parameters
test_runsub ./getopts1.sub -a -b bval one two three four five six seven eight nine ten eleven twelve
test_runsub ./getopts1.sub -a -b 

test_runsub ./getopts2.sub -ad -c cval three four five

test_runsub ./getopts3.sub

# make sure that `-b bval' and `-bbval' are equivalent
test_runsub ./getopts4.sub -a -b bval one two three
test_runsub ./getopts4.sub -a -bbval one two three
# this tests `silent' error reporting
test_runsub ./getopts4.sub -a -b
test_runsub ./getopts4.sub -a -c

# make sure that `--' can be used to end the list of options
test_runsub ./getopts4.sub -a -- -b bval one two three

test_runsub ./getopts5.sub -a -c

test_runsub ./getopts6.sub -a
test_runsub ./getopts6.sub -a -c
test_runsub ./getopts6.sub -ac
echo $? # this should be 2

test_runsub ./getopts7.sub -a

test_runsub ./getopts8.sub
test_runsub ./getopts9.sub

test_runsub ./getopts10.sub
